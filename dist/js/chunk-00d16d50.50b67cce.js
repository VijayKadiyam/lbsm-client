(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00d16d50"],{"44ff":function(t,e,a){},"99af":function(t,e,a){"use strict";var r=a("23e7"),s=a("d039"),o=a("e8b5"),i=a("861d"),n=a("7b0b"),c=a("07fa"),m=a("3511"),l=a("8418"),u=a("65f0"),d=a("1dde"),p=a("b622"),f=a("2d00"),b=p("isConcatSpreadable"),_=f>=51||!s((function(){var t=[];return t[b]=!1,t.concat()[0]!==t})),g=function(t){if(!i(t))return!1;var e=t[b];return void 0!==e?!!e:o(t)},h=!_||!d("concat");r({target:"Array",proto:!0,arity:1,forced:h},{concat:function(t){var e,a,r,s,o,i=n(this),d=u(i,0),p=0;for(e=-1,r=arguments.length;e<r;e++)if(o=-1===e?i:arguments[e],g(o))for(s=c(o),m(p+s),a=0;a<s;a++,p++)a in o&&l(d,p,o[a]);else m(p+1),l(d,p++,o);return d.length=p,d}})},b611:function(t,e,a){"use strict";a("44ff")},ed51:function(t,e,a){"use strict";a.r(e);a("99af"),a("fb6a");var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-content"},[e("breadcumb",{attrs:{page:"Create User Program Task",folder:"User Program Tasks"}}),e("b-row",{staticClass:"justify-content-md-center"},[e("b-col",{attrs:{md:"9"}},[e("b-card",{attrs:{title:"User Program Task Create"}},[e("b-row",[e("b-col",{attrs:{md:"12"}},[e("b-button",{staticStyle:{float:"right","margin-top":"-45px"},attrs:{variant:"primary"},on:{click:function(e){return t.$router.back()}}},[e("i",{staticClass:"i-Arrow-Back-3"}),t._v(" Back")])],1)],1),e("b-form",{on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[e("b-form-group",{attrs:{label:"Ship"}},[e("vue-tags-input",{staticClass:"tag-custom text-15 mb-2",attrs:{tags:t.selectedShip,"autocomplete-items":t.filteredShipItems,"add-only-from-autocomplete":!0,placeholder:"Type Ship Name"},on:{"tags-changed":function(e){return t.selectedShip=e}},model:{value:t.searchShip,callback:function(e){t.searchShip=e},expression:"searchShip"}})],1),e("b-form-group",{attrs:{label:"Program Task"}},[e("vue-tags-input",{staticClass:"tag-custom text-15 mb-2",attrs:{tags:t.selectedProgramTask,"autocomplete-items":t.filteredProgramTaskItems,"add-only-from-autocomplete":!0,placeholder:"Type Program Task Name"},on:{"tags-changed":function(e){return t.selectedProgramTask=e}},model:{value:t.searchProgramTask,callback:function(e){t.searchProgramTask=e},expression:"searchProgramTask"}})],1),4!=t.user.roles[0].id?e("b-form-group",{attrs:{label:"Marks Obtained"}},[e("b-form-input",{staticClass:"mb-2",attrs:{label:"Marks Obtained",placeholder:"Enter Marks Obtained"},model:{value:t.form.marks_obtained,callback:function(e){t.$set(t.form,"marks_obtained",e)},expression:"form.marks_obtained"}})],1):t._e(),4!=t.user.roles[0].id?e("b-form-group",{attrs:{label:"Remark"}},[e("b-form-input",{staticClass:"mb-2",attrs:{label:"Remark",placeholder:"Enter Remark"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1):t._e(),4!=t.user.roles[0].id?e("b-form-group",{attrs:{label:"Completion Date"}},[e("b-form-datepicker",{staticClass:"mb-2",attrs:{id:"dob",placeholder:"Completion Date"},model:{value:t.form.completion_date,callback:function(e){t.$set(t.form,"completion_date",e)},expression:"form.completion_date"}})],1):t._e(),e("b-row",[e("b-col",{attrs:{md:"6"}},[e("b-form-group",{attrs:{label:"Attachment 1"}},[e("b-form-file",{ref:"file1",attrs:{name:"imagepath1"}})],1)],1),e("b-col",{attrs:{md:"6"}},[e("b-form-group",{attrs:{label:"Attachment 2"}},[e("b-form-file",{ref:"file2",attrs:{name:"imagepath2"}})],1)],1)],1),e("b-row",[e("b-col",{attrs:{md:"6"}},[e("b-form-group",{attrs:{label:"Attachment 3"}},[e("b-form-file",{ref:"file3",attrs:{name:"imagepath3"}})],1)],1),e("b-col",{attrs:{md:"6"}},[e("b-form-group",{attrs:{label:"Attachment 4"}},[e("b-form-file",{ref:"file4",attrs:{name:"imagepath4"}})],1)],1)],1),4!=t.user.roles[0].id?e("b-form-group",{attrs:{label:"Is Completed"}},[e("label",{staticClass:"switch switch-success mr-3"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.is_completed,expression:"form.is_completed"}],attrs:{type:"checkbox",checked:"checkbox"},domProps:{checked:Array.isArray(t.form.is_completed)?t._i(t.form.is_completed,null)>-1:t.form.is_completed},on:{change:function(e){var a=t.form.is_completed,r=e.target,s=!!r.checked;if(Array.isArray(a)){var o=null,i=t._i(a,o);r.checked?i<0&&t.$set(t.form,"is_completed",a.concat([o])):i>-1&&t.$set(t.form,"is_completed",a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.form,"is_completed",s)}}}),e("span",{staticClass:"slider"})])]):t._e(),e("b-button",{attrs:{type:"submit",variant:"primary",disabled:"PENDING"===t.submitStatus}},[t._v("Submit")]),"OK"===t.submitStatus?t._m(0):t._e(),"ERROR"===t.submitStatus?t._m(1):t._e(),"PENDING"===t.submitStatus?t._m(2):t._e()],1)],1)],1)],1)],1)},s=[function(){var t=this,e=t._self._c;return e("p",{staticClass:"typo__p"},[t._v(" "+t._s(t.makeToastTwo("success"))+" ")])},function(){var t=this,e=t._self._c;return e("p",{staticClass:"typo__p"},[t._v(" "+t._s(t.makeToast("danger"))+" ")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"typo__p"},[e("div",{staticClass:"spinner sm spinner-primary mt-3"})])}],o=a("c7eb"),i=a("1da1"),n=(a("4de4"),a("d3b7"),a("159b"),a("a4d3"),a("e01a"),a("bc3a")),c=a.n(n),m={metaInfo:{title:"Program Task | Create"},data:function(){return{form:{user_id:"",program_id:"",program_task_id:"",marks_obtained:"",is_completed:"",completion_date:"",ship_id:""},submitStatus:null,searchProgramTask:"",selectedProgramTask:[],program_taskItems:[],searchShip:"",selectedShip:[],shipItems:[],user_program_task:[]}},computed:{filteredProgramTaskItems:function(){var t=this;return this.program_taskItems.filter((function(e){return-1!==e.text.toLowerCase().indexOf(t.searchProgramTask.toLowerCase())}))},filteredShipItems:function(){var t=this;return this.shipItems.filter((function(e){return-1!==e.text.toLowerCase().indexOf(t.searchShip.toLowerCase())}))}},validations:{form:{}},mounted:function(){this.form.site_id=this.site.id,this.getMasters()},methods:{getMasters:function(){var t=this;return Object(i["a"])(Object(o["a"])().mark((function e(){var a,r,s,i;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("user_program_tasks/masters");case 2:return a=e.sent,a=a.data,a.ships.forEach((function(e){t.shipItems.push({id:e.id,text:e.description})})),e.next=7,c.a.get("/user_programs/".concat(t.$route.params.user_program_id));case 7:return r=e.sent,t.user_program=r.data.data,e.next=11,c.a.get("/users/".concat(t.user_program.user_id));case 11:return s=e.sent,t.user=s.data.data,e.next=15,c.a.get("/programs/".concat(t.user_program.program_id));case 15:i=e.sent,t.program=i.data.data,t.user_program_posts=s.data.data.user_program_posts,t.user_program_posts.forEach((function(e){e.program_post.program_tasks.forEach((function(e){t.program_taskItems.push({id:e.id,text:e.serial_no+"-"+e.task})}))}));case 19:case"end":return e.stop()}}),e)})))()},submit:function(){var t=this;return Object(i["a"])(Object(o["a"])().mark((function e(){var a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("submit!"),t.form.user_id=t.user_program.user_id,t.form.program_id=t.user_program.program_id,t.form.program_task_id=t.selectedProgramTask[0].id,t.selectedShip[0]&&(t.form.ship_id=t.selectedShip[0].id),4==t.user.roles[0].id&&(t.form.marks_obtained=0,t.form.is_completed=!1),t.form.added_by_id=t.user.id,t.$v.$touch(),!t.$v.$invalid){e.next=12;break}t.submitStatus="ERROR",e.next=28;break;case 12:return e.prev=12,t.isLoading=!0,e.next=16,c.a.post("user_programs/".concat(t.user_program.id,"/user_program_tasks"),t.form);case 16:return a=e.sent,t.user_program_task=a.data.data,e.next=20,t.handleFileUpload();case 20:t.isLoading=!1,t.submitStatus="OK",t.$router.push("/app/user-program/".concat(t.$route.params.user_program_id,"/user-program-tasks/")),e.next=28;break;case 25:e.prev=25,e.t0=e["catch"](12),t.isLoading=!1;case 28:case"end":return e.stop()}}),e,null,[[12,25]])})))()},handleFileUpload:function(){var t=this;return Object(i["a"])(Object(o["a"])().mark((function e(){var a,r,s,i,n,m,l,u,d,p;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=null===(a=t.$refs.file1)||void 0===a?void 0:a.files[0],m=null===(r=t.$refs.file2)||void 0===r?void 0:r.files[0],l=null===(s=t.$refs.file3)||void 0===s?void 0:s.files[0],u=null===(i=t.$refs.file4)||void 0===i?void 0:i.files[0],d=t.user_program_task.id,p=new FormData,p.append("user_program_task_id",d),p.append("imagepath1",n),p.append("imagepath2",m),p.append("imagepath3",l),p.append("imagepath4",u),e.next=13,c.a.post("upload_user_program_task_images",p,{headers:{"Content-Type":"multipart/form-data"}}).catch((function(){console.log("FAILURE!!")}));case 13:case"end":return e.stop()}}),e)})))()},makeToast:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.$bvToast.toast("Please fill the form correctly.",{title:"Variant ".concat(t||"default"),variant:t,solid:!0})},makeToastTwo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.$bvToast.toast("Successfully Submitted",{title:"Variant ".concat(t||"default"),variant:t,solid:!0})},inputSubmit:function(){console.log("submitted")}}},l=m,u=(a("b611"),a("2877")),d=Object(u["a"])(l,r,s,!1,null,null,null);e["default"]=d.exports}}]);