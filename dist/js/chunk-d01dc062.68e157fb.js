(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d01dc062"],{"23db":function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e._self._c;return a("div",{staticClass:"main-content"},[a("breadcumb",{attrs:{page:"Upload KARCO Tasks",folder:"KARCO Tasks"}}),a("b-row",{staticClass:"justify-content-md-center"},[a("b-col",{attrs:{md:"12"}},[a("b-card",{staticClass:"mb-4"},[a("b-row",[a("b-col",{attrs:{md:"12"}},[a("a",{attrs:{href:"".concat(e.mediaUrl,"samples/KarcoTask-sample-data.xlsx"),target:"_blank"}},[e._v(" [ Download Sample Excel ] ")]),a("br"),a("input",{ref:"file",staticClass:"mb-2",attrs:{type:"file",id:"file",name:"file",accept:"application/ms-excel"}}),a("br"),a("b-button",{staticClass:"btn d-none d-sm-block",attrs:{variant:"primary"},on:{click:e.truncatePendingDocuments}},[a("i",{staticClass:"i-Delete-File text-white mr-2"}),e._v("Truncate List ")])],1)],1),a("b-row",[a("b-col",{attrs:{md:"12"}},[a("br"),a("br"),a("span",{staticStyle:{color:"red"}},[e._v(" "+e._s(e.message)+" ")]),e.isLoading?a("b-progress",{staticClass:"mb-2",attrs:{value:e.changeValue,max:e.max,animated:""}}):e._e(),0==e.crudeKarcoTasks.length?a("b-button",{attrs:{block:"",variant:"primary"},on:{click:e.handleFileUpload}},[e._v("Upload file")]):a("b-button",{attrs:{block:"",variant:"primary"},on:{click:e.processFile}},[e._v("Process file")])],1)],1)],1)],1)],1),a("b-row",{staticClass:"justify-content-md-center"},[a("b-col",{attrs:{md:"12"}},[a("b-card",[a("vue-good-table",{attrs:{columns:e.columns,"line-numbers":!0,"search-options":{enabled:!0,placeholder:"Search this table"},"pagination-options":{enabled:!0,mode:"records"},styleClass:"tableOne vgt-table",rows:e.crudeKarcoTasks}})],1)],1)],1)],1)},n=[],c=t("c7eb"),r=t("1da1"),l=t("bc3a"),i=t.n(l),o={metaInfo:{title:"Upload Karco Tasks Excel"},data:function(){return{form:{},crudeKarcoTasks:[],isLoading:!1,columns:[{label:"Vessel Name",field:"vessel_name"},{label:"Crew Name",field:"crew_name"},{label:"Employee ID",field:"employee_id"},{label:"Rank",field:"rank"},{label:"Deparrtment",field:"department"},{label:"Status",field:"status"},{label:"Signed On",field:"signed_on"},{label:"Nationality",field:"nationality"},{label:"Video Title",field:"video_title"},{label:"No. Of Preview Watched",field:"no_of_video_watched"},{label:"Obtained Marks",field:"obtained_marks"},{label:"Total Marks",field:"total_marks"},{label:"Percentage",field:"percentage"},{label:"Done On",field:"done_on"},{label:"Due Days",field:"due_days"},{label:"Assessment Status",field:"assessment_status"}],searchingStatus:"",changeValue:0,changeMax:100,submitStatus:null}},mounted:function(){this.form.site_id=this.site.id,this.getData()},methods:{getData:function(){var e=arguments,a=this;return Object(r["a"])(Object(c["a"])().mark((function t(){var s,n;return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.length>0&&void 0!==e[0]?e[0]:1,a.isLoading=!0,a.searchingStatus="Searching...",a.changeValue=100,t.next=6,i.a.get("/crude_karco_tasks");case 6:n=t.sent,a.crudeKarcoTasks=n.data.data,a.count=n.data.count,a.serialNoStarting=(s-1)*a.rowsPerPage,a.isLoading=!1,a.searchingStatus="";case 12:case"end":return t.stop()}}),t)})))()},handleFileUpload:function(){var e=this;return Object(r["a"])(Object(c["a"])().mark((function a(){var t;return Object(c["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.isLoading=!0,e.KarcoTasks=e.$refs.file.files[0],t=new FormData,t.append("karcotasksData",e.KarcoTasks),e.changeValue=100,a.next=7,i.a.post("upload_karco_task",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(a){a.data.data&&(e.crudeKarcoTasks=a.data.data),e.isLoading=!1,e.$swal("Done","Uploaded Successfully.","success")})).catch((function(){console.log("FAILURE!!")}));case 7:e.isLoading=!1;case 8:case"end":return a.stop()}}),a)})))()},processFile:function(){var e=this;return Object(r["a"])(Object(c["a"])().mark((function a(){return Object(c["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.isLoading=!0,e.changeValue=100,a.next=5,i.a.get("process_karco_task?is_existing_batch=".concat(e.form.is_existing_batch?1:0));case 5:return e.$swal("Done","Processed Successfully.","success"),a.next=8,i.a.get("truncate_karco_tasks");case 8:e.crudeKarcoTasks=[],e.isLoading=!1,a.next=15;break;case 12:a.prev=12,a.t0=a["catch"](0),console.log(a.t0);case 15:case"end":return a.stop()}}),a,null,[[0,12]])})))()},truncatePendingDocuments:function(){var e=this;return Object(r["a"])(Object(c["a"])().mark((function a(){return Object(c["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,i.a.get("truncate_karco_tasks");case 2:e.$swal("Done","Truncated Successfully.","success"),e.crudeKarcoTasks=[];case 4:case"end":return a.stop()}}),a)})))()},makeToast:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.$bvToast.toast("Please fill the form correctly.",{title:"Variant ".concat(e||"default"),variant:e,solid:!0})},makeToastTwo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.$bvToast.toast("Successfully Submitted",{title:"Variant ".concat(e||"default"),variant:e,solid:!0})},inputSubmit:function(){console.log("submitted")}}},d=o,u=(t("fdd8"),t("2877")),b=Object(u["a"])(d,s,n,!1,null,null,null);a["default"]=b.exports},c73f:function(e,a,t){},fdd8:function(e,a,t){"use strict";t("c73f")}}]);