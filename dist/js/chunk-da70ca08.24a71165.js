(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-da70ca08"],{"99af":function(e,t,n){"use strict";var r=n("23e7"),a=n("d039"),s=n("e8b5"),i=n("861d"),c=n("7b0b"),o=n("07fa"),d=n("3511"),l=n("8418"),u=n("65f0"),f=n("1dde"),m=n("b622"),h=n("2d00"),p=m("isConcatSpreadable"),b=h>=51||!a((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),v=f("concat"),_=function(e){if(!i(e))return!1;var t=e[p];return void 0!==t?!!t:s(e)},k=!b||!v;r({target:"Array",proto:!0,arity:1,forced:k},{concat:function(e){var t,n,r,a,s,i=c(this),f=u(i,0),m=0;for(t=-1,r=arguments.length;t<r;t++)if(s=-1===t?i:arguments[t],_(s))for(a=o(s),d(m+a),n=0;n<a;n++,m++)n in s&&l(f,m,s[n]);else d(m+1),l(f,m++,s);return f.length=m,f}})},b730:function(e,t,n){"use strict";n.r(t);n("99af"),n("fb6a"),n("b0c0");var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main-content"},[t("breadcumb",{attrs:{page:"Permissions | List",folder:"Permissions"}}),t("b-card",[t("table",{staticClass:"table table-hover table-striped"},[t("thead",[t("tr",[t("th",[e._v("Sr. No.")]),t("th",[e._v("Id")]),e._l(e.headers,(function(n,r){return t("th",{key:"header".concat(r)},[e._v(" "+e._s(n.text)+" ")])}))],2)]),t("tbody",e._l(e.items,(function(n,r){return t("tr",{key:"item".concat(r)},[t("td",[e._v(e._s(r+1))]),t("td",[e._v("PER"+e._s(n.id))]),t("td",[e._v(e._s(n.name))]),e._l(e.headers.slice(1),(function(r,a){return t("td",{key:a},[t("div",{staticClass:"form-check"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"selected"}],attrs:{type:"checkbox","hide-details":""},domProps:{value:n.id+""+r.value,checked:Array.isArray(e.selected)?e._i(e.selected,n.id+""+r.value)>-1:e.selected},on:{click:function(t){return e.updatePermission(n.id,r.value)},change:function(t){var a=e.selected,s=t.target,i=!!s.checked;if(Array.isArray(a)){var c=n.id+""+r.value,o=e._i(a,c);s.checked?o<0&&(e.selected=a.concat([c])):o>-1&&(e.selected=a.slice(0,o).concat(a.slice(o+1)))}else e.selected=i}}})])])}))],2)})),0)])])],1)},a=[],s=n("c7eb"),i=n("1da1"),c=(n("4de4"),n("14d9"),n("d3b7"),n("159b"),n("bc3a")),o=n.n(c),d={metaInfo:{title:"Permission Manage"},data:function(){return{columns:[{label:"Sr No",field:"sr_no"},{label:"Permissions",field:"name"},{label:"Main Admin",field:"checkbox"},{label:"Admin",field:"checkbox"}],headers:[{text:"Permissions",value:"permissions"}],permissions:[],items:[],loading:!0,selected:[]}},mounted:function(){var e=this;return Object(i["a"])(Object(s["a"])().mark((function t(){var n,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("/permissions");case 2:return n=t.sent,t.next=5,o.a.get("/roles?search=all");case 5:r=t.sent,e.permissions=n.data.data,e.roles=r.data.data,e.roles=e.restrictRolesList(e.roles),e.roles.forEach((function(t){e.headers.push({text:t.name,value:t.id})})),e.updateSelected(e.roles),e.permissions.forEach((function(t){e.items.push({id:t.id,name:t.name})})),e.loading=!1;case 13:case"end":return t.stop()}}),t)})))()},methods:{updatePermission:function(e,t){var n=this;return Object(i["a"])(Object(s["a"])().mark((function r(){var a;return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a={role_id:t,permission_id:e},-1!=n.selected.indexOf(e+""+t)){r.next=6;break}return r.next=4,o.a.post("/assign_permissions",a);case 4:r.next=8;break;case 6:return r.next=8,o.a.post("/unassign_permissions",a);case 8:n.updateSelected();case 9:case"end":return r.stop()}}),r)})))()},updateSelected:function(){var e=this;return Object(i["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("/roles?search=all");case 2:n=t.sent,e.roles=n.data.data,e.roles=e.restrictRolesList(e.roles),e.selected=[],n.data.data.forEach((function(t){t.permissions.forEach((function(n){e.selected.push(n.id+""+t.id)}))}));case 7:case"end":return t.stop()}}),t)})))()},restrictRolesList:function(e){return e=e.filter((function(e){return"Super Admin"!=e.name})),e},restrictPermissions:function(e){return e=e.filter((function(e){return"Manage Organizations"!=e.name})),e=e.filter((function(e){return"Super Admin Settings"!=e.name})),e}}},l=d,u=n("2877"),f=Object(u["a"])(l,r,a,!1,null,null,null);t["default"]=f.exports}}]);